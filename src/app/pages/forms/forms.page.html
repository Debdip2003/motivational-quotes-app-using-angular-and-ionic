<ion-content class="auth-container ion-padding">
  <div class="auth-box">
    <div class="form-container">
      <!-- Title and Subtitle -->
      <h1>{{ isLoginForm ? 'Welcome Back' : 'Create Account' }}</h1>
      <p class="subtitle">
        {{ isLoginForm ? 'Login to continue' : 'Sign up to get started' }}
      </p>

      <!-- LOGIN FORM -->
      @if (isLoginForm) {
      <form [formGroup]="loginForm">
        <!-- Email -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Email</ion-label>
          <ion-input type="email" formControlName="email"></ion-input>
        </ion-item>

        @if (loginForm.get('email')?.touched && loginForm.get('email')?.errors)
        {
        <ion-text color="danger">
          @if (loginForm.get('email')?.hasError('required')) {
          <small>Email is required.</small>
          } @if (loginForm.get('email')?.hasError('pattern')) {
          <small>Enter a valid email.</small>
          }
        </ion-text>
        }

        <!-- Password -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Password</ion-label>
          <ion-input type="password" formControlName="password"></ion-input>
        </ion-item>

        @if (loginForm.get('password')?.touched &&
        loginForm.get('password')?.errors) {
        <ion-text color="danger">
          @if (loginForm.get('password')?.hasError('required')) {
          <small>Password is required.</small>
          } @if (loginForm.get('password')?.hasError('pattern')) {
          <small>Password must be at least 6 characters.</small>
          }
        </ion-text>
        }

        <ion-button
          expand="block"
          shape="round"
          class="primary-btn"
          type="submit"
          (click)="onSubmit()"
        >
          Login
        </ion-button>
      </form>
      }

      <!-- SIGNUP FORM -->
      @if (!isLoginForm) {
      <form [formGroup]="signupForm">
        <!-- Email -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Email</ion-label>
          <ion-input type="email" formControlName="email"></ion-input>
        </ion-item>

        @if (signupForm.get('email')?.touched &&
        signupForm.get('email')?.errors) {
        <ion-text color="danger">
          @if (signupForm.get('email')?.hasError('required')) {
          <small>Email is required.</small>
          } @if (signupForm.get('email')?.hasError('pattern')) {
          <small>Enter a valid email.</small>
          }
        </ion-text>
        }

        <!-- Password -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Password</ion-label>
          <ion-input type="password" formControlName="password"></ion-input>
        </ion-item>

        @if (signupForm.get('password')?.touched &&
        signupForm.get('password')?.errors) {
        <ion-text color="danger">
          @if (signupForm.get('password')?.hasError('required')) {
          <small>Password is required.</small>
          } @if (signupForm.get('password')?.hasError('pattern')) {
          <small>Password must be at least 6 characters.</small>
          }
        </ion-text>
        }

        <!-- Confirm Password -->
        <ion-item lines="none" class="input-item">
          <ion-label position="floating">Confirm Password</ion-label>
          <ion-input
            type="password"
            formControlName="confirmPassword"
          ></ion-input>
        </ion-item>

        @if ( signupForm.get('confirmPassword')?.touched &&
        signupForm.get('confirmPassword')?.errors ) {
        <ion-text color="danger">
          @if (signupForm.get('confirmPassword')?.hasError('required')) {
          <small>Confirm password is required.</small>
          } @if (signupForm.get('confirmPassword')?.hasError('mismatch')) {
          <small>Passwords do not match.</small>
          }
        </ion-text>
        }

        <ion-button
          expand="block"
          shape="round"
          class="primary-btn"
          type="submit"
          (click)="onSubmit()"
        >
          Sign Up
        </ion-button>
      </form>
      }

      <!-- Toggle link -->
      <div class="toggle-link">
        <p>
          {{ isLoginForm ? "Don't have an account?" : 'Already have an account?'
          }}
          <a (click)="toggleForm()">
            {{ isLoginForm ? 'Sign Up' : 'Login' }}
          </a>
        </p>
      </div>
    </div>
  </div>
</ion-content>
